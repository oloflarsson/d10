(this.webpackJsonpd10=this.webpackJsonpd10||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),i=n(5),c=n.n(i),l=(n(13),n(6)),r=n(2),o=n(3),d=n(8),u=n(7),h=(n(14),function e(t,n){var s=Math.ceil(10*Math.random());if(s<8)return n?e(t,!1):0;var a=1;return s>=t&&(a+=e(t,!1)),a}),b=function(e,t,n){for(var s=0,a=0;a<e;a++)s+=h(t,n);return s},j=function e(t,n){if(t<8)throw new Error("again must be larger than or equal to 8");if(n){var s=10-t+1,a=3-s;return 7*e(t,!1)/10+(1+e(t,!1))*s/10+1*a/10}return t>=11?.3:3/(t-1)},v=function(e,t,n){return j(t,n)*e},p=function(e,t){return t&&(e*=2),1-Math.pow(.7,e)},m=function(){function e(t,n){Object(r.a)(this,e),this.key=t,this.initialValue=JSON.stringify(n)}return Object(o.a)(e,[{key:"getInitial",value:function(){return JSON.parse(this.initialValue)}},{key:"get",value:function(){var e=window.localStorage.getItem(this.key);if(null===e||void 0===e)return this.getInitial();try{return JSON.parse(e)}catch(t){return this.getInitial()}}},{key:"set",value:function(e){var t=JSON.stringify(e);return window.localStorage.setItem(this.key,t)}}]),e}(),w=n(0),f=!0,g=!0,O=new m("storagev4",{dices:4,again:10,rote:!1,rollEnabled:f,willpowerEnabled:g,successes:0,willpowerSuccesses:0,presets:[]}),x=function(e){return Math.round(100*e)+"%"},y=function(e){return""+Math.round(100*e)/100},N=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(r.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state=O.get(),e.edit=function(t){e.setState(t,e.saveState)},e.editPreset=function(t){var n=e.state.presets.map((function(e){return e.id===t.id?Object.assign({},e,t):e}));e.edit({presets:n})},e.addPreset=function(t){var n=e.state.presets,s=[].concat(Object(l.a)(n),[t]);e.edit({presets:s})},e.removePreset=function(t){var n=e.state.presets.filter((function(e){return e.id!==t.id}));e.edit({presets:n})},e.saveState=function(){O.set(e.state)},e.handleDicesChanged=function(t){var n=t.target.value;e.edit({dices:n,rollEnabled:f,willpowerEnabled:g,successes:0,willpowerSuccesses:0})},e.handleAgainChanged=function(t){var n=t.target.value;e.edit({again:n,rollEnabled:f,willpowerEnabled:g,successes:0,willpowerSuccesses:0})},e.handleRoteChanged=function(t){var n=t.target.checked;e.edit({rote:n,rollEnabled:f,willpowerEnabled:g,successes:0,willpowerSuccesses:0})},e.handleClear=function(){e.edit({rollEnabled:f,willpowerEnabled:g,successes:0,willpowerSuccesses:0})},e.handleRoll=function(){var t=e.state,n=t.dices,s=t.again,a=t.rote,i=t.successes+b(n,s,a);e.edit({rollEnabled:!1,successes:i})},e.handleWillpower=function(){var t=e.state,n=t.again,s=t.rote,a=t.successes,i=b(3,n,s),c=a+i;e.edit({willpowerEnabled:!1,successes:c,willpowerSuccesses:i})},e.handlePresetAdd=function(){var t=e.state,n=t.dices,s=t.again,a=t.rote,i=Date.now(),c="".concat(n," A").concat(s);a&&(c+=" R");var l={id:i,name:c,dices:n,again:s,rote:a,edit:!1};e.addPreset(l)},e.handlePresetEdit=function(t){var n=t.id;e.editPreset({id:n,edit:!0})},e.handlePresetLoad=function(t){var n=t.dices,s=t.again,a=t.rote;e.edit({dices:n,again:s,rote:a,rollEnabled:f,willpowerEnabled:g,successes:0,willpowerSuccesses:0})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.dices,s=t.again,a=t.rote,i=t.rollEnabled,c=t.willpowerEnabled,l=t.successes,r=t.willpowerSuccesses,o=t.presets,d=p(n,a),u=v(n,s,a),h=x(d),b=y(u),j="The chance to get at least 1 success is ".concat(h," when rolling ").concat(n," dices."),m="The average amount of successes is ".concat(b," when rolling ").concat(n," dices with ").concat(s,"-again.");return Object(w.jsx)("div",{className:"App",children:Object(w.jsxs)("div",{className:"holder",children:[Object(w.jsxs)("div",{className:"map",children:[Object(w.jsxs)("div",{className:"entry",children:[Object(w.jsx)("div",{className:"key",title:"The amount of dices to be rolled.",children:"Dices:"}),Object(w.jsx)("div",{className:"value",children:Object(w.jsx)("input",{className:"input",type:"number",min:"1",value:n,onChange:this.handleDicesChanged})})]}),Object(w.jsxs)("div",{className:"entry",children:[Object(w.jsx)("div",{className:"key",title:"Roll one more dice if the dice shows this value and above.",children:"Again:"}),Object(w.jsx)("div",{className:"value",children:Object(w.jsx)("input",{className:"input",type:"number",min:"8",max:"11",value:s,onChange:this.handleAgainChanged})})]}),Object(w.jsxs)("div",{className:"entry",children:[Object(w.jsx)("div",{className:"key",title:"Reroll all failed dice on the initial roll while not rerolling the results of that reroll, or the results of any 8, 9, or 10-again rerolls.",children:"Rote:"}),Object(w.jsx)("div",{className:"value",children:Object(w.jsx)("input",{className:"input checkbox",type:"checkbox",checked:a,onChange:this.handleRoteChanged})})]})]}),Object(w.jsxs)("div",{className:"stats",children:[Object(w.jsxs)("div",{className:"entry",title:j,children:[Object(w.jsx)("div",{className:"key",children:"Chance:"}),Object(w.jsx)("div",{className:"value",children:h})]}),Object(w.jsxs)("div",{className:"entry",title:m,children:[Object(w.jsx)("div",{className:"key",children:"Expected:"}),Object(w.jsx)("div",{className:"value",children:b})]})]}),Object(w.jsxs)("div",{className:"buttons",children:[Object(w.jsx)("button",{className:"button",type:"button",onClick:this.handleClear,children:"Clear"}),Object(w.jsx)("button",{className:"button",type:"button",onClick:this.handleRoll,disabled:i?"":"disabled",children:"Roll"}),Object(w.jsx)("button",{className:"button",type:"button",onClick:this.handleWillpower,disabled:c?"":"disabled",children:"Willpower"})]}),Object(w.jsx)("div",{className:"successes",children:i&&c?"?":l}),Object(w.jsx)("div",{className:"willpowerSuccesses",children:c?Object(w.jsx)(w.Fragment,{children:"\xa0"}):Object(w.jsxs)(w.Fragment,{children:[r," from Willpower"]})}),Object(w.jsxs)("div",{className:"presets",children:[o.map((function(t){var n=p(t.dices,t.rote),s=v(t.dices,t.again,t.rote),a=x(n),i=y(s),c="Dices: ".concat(t.dices,"\nAgain: ").concat(t.again,"\nRote: ").concat(t.rote,"\nChance: ").concat(a,"\nExpected: ").concat(i,"\n\nLeft click to apply. Right click to edit name. Press ENTER, ESC or click elsewhere to save. Will be deleted if saving with empty name.");if(t.edit){var l=function(){""!==t.name?e.editPreset({id:t.id,edit:!1}):e.removePreset({id:t.id})};return Object(w.jsx)("input",{className:"preset",type:"text",value:t.name,onChange:function(n){e.editPreset({id:t.id,name:n.target.value})},onKeyDown:function(e){"Escape"!==e.key&&"Enter"!==e.key||l()},onBlur:l,title:c,autoFocus:!0},t.id)}return Object(w.jsx)("button",{className:"preset",type:"button",onClick:function(){e.handlePresetLoad(t)},onContextMenu:function(n){n.preventDefault(),e.handlePresetEdit(t)},title:c,children:t.name},t.id)})),Object(w.jsx)("button",{className:"preset",type:"button",onClick:this.handlePresetAdd,children:"+"})]})]})})}}]),n}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(N,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.6d8aa30a.chunk.js.map